这份需求文档（PRD）是为你量身定制的。它不仅描述了“我们要画什么页面”，更重要的是从**软件工程**的角度定义了系统的核心——即你关心的“看不见的系统”。

---

# 需求文档 (PRD)：单机版求职申请跟踪器 (Job Tracker)

**版本：** v1.0 (MVP - 最小可行性产品)

**技术栈：** React + TypeScript + nextjs

**存储方案：** 浏览器 LocalStorage (无后端模式)

---

## 1. 项目概述

本项旨在帮助求职者管理海量的岗位申请信息。通过**看板（Kanban）**的形式，可视化招聘流程（如：准备中 -> 已投递 -> 面试中 -> 收到Offer）。该项目作为求职作品，核心在于展示**良好的代码结构、TypeScript 类型安全、以及复杂的业务逻辑处理能力**。

---

## 2. 核心数据模型 (The Domain Model)

这是系统的灵魂，决定了功能的上限。

### 2.1 任务卡片 (JobCard)

| 字段 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| `id` | string | 是 | 唯一识别码 (UUID) |
| `jobTitle` | string | 是 | 职位名称 |
| `companyName` | string | 是 | 公司名称 |
| `statusId` | string | 是 | 关联的列 ID |
| `jobLink` | string | 否 | 职位链接 |
| `createdAt` | number | 是 | 创建时间戳 |
| `updatedAt` | number | 是 | 最后更新时间戳 |
| `tags` | string[] | 否 | 标签（如：远程、高薪） |
| `comments` | string | 否 | 个人备注 |

### 2.2 状态列 (Column)

| 字段 | 类型 | 必填 | 说明 |
| --- | --- | --- | --- |
| `id` | string | 是 | 唯一识别码 |
| `name` | string | 是 | 列名 (如：面试中) |
| `order` | number | 是 | 显示顺序 |
| `isDefault` | boolean | 是 | 系统预设列（不可删除） |

---

## 3. 功能需求 (Functional Requirements)

### 3.1 看板管理 (Board Management)

* **初始化渲染**：首次进入应用，系统应自动加载预设的 5 个阶段（准备、投递、面试、Offer、拒绝）。
* **列排序**：用户可以调整列的左右顺序。
* **自定义列**：用户可以添加新列或重命名非系统预设列。
* **安全删除**：删除列时，该列下的卡片必须自动移动到“默认第一列”，严禁出现数据丢失。

### 3.2 卡片生命周期 (Card Logic)

* **添加 (Create)**：支持快速创建。只需填写公司和职位，其余字段默认。
* **状态迁移 (Move)**：卡片可以在不同列之间移动（代表求职状态变更）。
* **详情编辑 (Update)**：点击卡片可编辑选填字段（备注、链接等）。
* **物理删除 (Delete)**：用户确认后可永久删除某条申请记录。

### 3.3 数据持久化 (Storage)

* **自动保存**：所有数据操作（增删改移）后，必须立即同步到 `localStorage`。
* **冷启动加载**：页面刷新时，优先从存储读取，若存储为空就什么都不加载。

---

## 4. 系统架构与逻辑流 (Service Logic)

系统采用典型的“逻辑与视图分离”架构：

1. **Storage Layer (存储层)**：负责 `localStorage` 的 JSON 读写和错误处理。
2. **Domain Service (业务层)**：这是你的 `BoardService`，负责实现纯逻辑的 `addJob`, `moveCard` 等函数。它不依赖 React，易于进行**单元测试**。
3. **UI Components (视图层)**：React 组件负责收集输入、触发 Service，并重新渲染页面。

---

## 5. 交互逻辑细节 (UX Logic)

* **时间戳自动化**：用户手动修改卡片内容后，`updatedAt` 必须自动更新。
* **唯一性保证**：创建卡片时，由 Service 自动生成 UUID，而非依赖 UI 输入。
* **空状态处理**：如果某列没有卡片，应显示“暂无申请”的占位提示。

---

## 6. 后期扩展预留 (Non-MVP)

* **附件管理**：存储简历和 Cover Letter 的 Base64 或链接。
* **搜索过滤**：按公司名或职位名实时过滤看板。
* **统计图表**：展示投递成功率、面试转化率等数据仪表盘。

---

## 7. 工程师调试指南 (No-UI Debugging)

在开始写 CSS 之前，必须通过以下脚本验证系统完整性：

1. **冒烟测试**：调用 `addJob`，检查存储中是否出现了新 ID。
2. **边界测试**：尝试删除一个 `isDefault: true` 的列，检查系统是否拦截。
3. **压力测试**：添加 100 张卡片，检查 `localStorage` 的读写性能。

---

### 这份文档的作用：

这就好比你的**施工图纸**。现在我们有了图纸（PRD）和地基（Types），接下来我们要做的就是把那些 Service 函数填满。

**你对这份文档中的逻辑（尤其是删除列时的保护逻辑）有什么疑问吗？如果没有，我们可以开始编写 `BoardService` 的具体实现了。**